:root{
  --bg:#0b0c10;
  --panel:#111319;
  --text:#e8e9ee;
  --muted:#9aa0c5; /* 修正 */
  --line:#242836;
  --accent:#6ee7ff;
  --good:#34d399;
  --bad:#fb7185;
}

*{box-sizing:border-box;}
html, body{
  margin:0; width:100%; height:100%;
  background: radial-gradient(1200px 800px at 50% 10%, #151a2b, var(--bg));
  color:var(--text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans JP", sans-serif;
}

#app{
  width:min(420px, 100vw);
  min-height:100dvh; /* iOS対策 */
  height:100dvh;     /* iOS対策 */
  margin:0 auto;
  display:flex;
  flex-direction:column;
}

.topbar{
  display: flex;
  align-items: center;
  gap: 12px;
  padding:10px 16px;
  border-bottom:1px solid var(--line);
}
.iconBtn{
  background: transparent;
  border: none;
  font-size: 24px;
  cursor: pointer;
  padding: 0;
}
.title{font-weight:700; letter-spacing:.5px;}
.sub{color:#a9b0c5; font-size:12px; margin-top:4px;}

.screen{
  flex:1;
  padding:16px;
  overflow:auto;
}

.card{
  background: linear-gradient(180deg, #121625, var(--panel));
  border:1px solid var(--line);
  border-radius:16px;
  padding:14px;
  margin:10px 0;
}

.h1{font-size:18px; font-weight:800; margin:0 0 8px;}
.p{color:#a9b0c5; font-size:13px; line-height:1.6; margin:0;}

.row{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px;}
.choice{
  flex:1 1 160px;
  padding:12px;
  border-radius:14px;
  border:1px solid var(--line);
  background:#0f1320;
  cursor:pointer;
  user-select:none;
  transition:transform .05s ease, border-color .15s ease;
}
.choice:active{transform:scale(.99);}
.choice .name{font-weight:700;}
.choice .meta{color:#a9b0c5; font-size:12px; margin-top:6px;}
.choice.selected{border-color: var(--accent); box-shadow: 0 0 0 2px rgba(110,231,255,.12) inset;}

.bottombar{
  display:flex;
  gap:10px;
  padding:0;
  border-top:1px solid var(--line);
  background: rgba(9,10,15,.55);
  backdrop-filter: blur(10px);
}

.btn{
  flex:1;
  padding:12px 14px;
  border-radius:14px;
  border:1px solid var(--line);
  background: linear-gradient(180deg, #1b2140, #12162a);
  color:var(--text);
  font-weight:800;
  cursor:pointer;
}
.btn.ghost{
  background: transparent;
  color:#c7ccdd;
}
.btn:disabled{
  opacity:.45;
  cursor:not-allowed;
}

.progressWrap{
  margin-top:12px;
  border:1px solid var(--line);
  border-radius:999px;
  overflow:hidden;
  background:#0f1320;
}
.progressBar{
  height:10px;
  width:0%;
  background: linear-gradient(90deg, var(--accent), var(--good));
}

.big{
  font-size:34px;
  font-weight:900;
  letter-spacing:.5px;
}
.kicker{
  color:#a9b0c5;
  margin-top:6px;
  font-size:13px;
}
.pill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid var(--line);
  background:#0f1320;
  color:#c7ccdd;
  font-size:12px;
  margin-top:10px;
}
.pill b{color:var(--text);}

/* 下部ナビ */
.nav{
  display:flex;
  gap:4px;
  padding:10px 4px calc(10px + env(safe-area-inset-bottom));
  overflow-x:auto;         /* はみ出たら横スクロール */
  -webkit-overflow-scrolling: touch;
  width:100%;
}

.navItem{
  flex:1;                  /* 均等に広げる */
  border:1px solid var(--line);
  background:#0f1320;
  color:#c7ccdd;
  border-radius:14px;
  padding:10px 8px;
  cursor:pointer;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:4px;
}

.navItem.active{
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(110,231,255,.12) inset;
  color: var(--text);
}

.navIcon{font-size:18px; line-height:1;}
.navLabel{
  white-space:nowrap;      /* 文字を折り返さない */
  font-size:11px;          /* 12のままでもOK。気になるなら11 */
}

/* Homeレイアウト */
.homeWrap{
  height:100%;
  display:flex;
  flex-direction:column;
  gap:12px;
  /* 背景画像の設定 */
  background: url("assets/first.png") no-repeat center center / cover;
  margin: -16px;  /* 親要素(screen)のpaddingを打ち消して端まで広げる */
  padding: 16px;  /* 中身の要素の位置を元に戻す */
}

.homeWrap .card{
  width:100%;
  /* 少し透過させてすりガラス効果をつける */
  background: linear-gradient(180deg, rgba(18, 22, 37, 0.85), rgba(17, 19, 25, 0.85));
  backdrop-filter: blur(5px);
}

/* 下1/3：吹き出し＋立ち絵 */
.homeBottom{
  height:16vh;            /* 画面下1/6くらい */
  min-height:110px;
  display:flex;
  gap:10px;
  align-items:stretch;
}

.bubble{
  flex:1;
  position:relative;
  background: linear-gradient(180deg, rgba(18, 22, 37, 0.85), rgba(17, 19, 25, 0.85));
  backdrop-filter: blur(5px);
  border:1px solid var(--line);
  border-radius:18px;
  padding:16px 14px 14px;
  overflow:hidden;
}

/* 吹き出しっぽいしっぽ（右向き） */
.bubble:after{
  content:"";
  position:absolute;
  right:-10px;
  bottom:28px;
  width:18px;
  height:18px;
  background: linear-gradient(180deg, rgba(18, 22, 37, 0.85), rgba(17, 19, 25, 0.85));
  border-right:1px solid var(--line);
  border-bottom:1px solid var(--line);
  transform: rotate(-45deg);
}

/* 名前タグ：左上に「ノガミ」 */
.nameTag{
  position:absolute;
  top:10px;
  left:10px;
  padding:5px 10px;
  border-radius:999px;
  border:1px solid var(--line);
  background:#0f1320;
  font-size:12px;
  font-weight:900;
  color:var(--text);
}

/* 吹き出し本文 */
.bubbleText{
  margin-top:36px;
  color:#d9dbe6;
  font-size:14px;
  line-height:1.7;
  white-space:pre-line;
}

/* スマホで下部が窮屈なら高さを少し下げる */
@media (max-height: 700px){
  .homeBottom{ height: 19vh; }
}

.choice {
  touch-action: manipulation;
}